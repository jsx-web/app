#include "infobuffer.h"

InfoBuffer::InfoBuffer()
{
    MaxSize = BUFFERSIZE;
    Size = 0;
}

int InfoBuffer::GetMaxSize()
{
    return MaxSize;
}

int InfoBuffer::GetSize()
{
    return Size;
}

bool InfoBuffer::push(unsigned char *data, int len)
{
    if(len < BUF_LEN)
    {
        if(Size <= MaxSize)
        {
            Info Data;
            Data.setInfo(data,len);
            Q.push(Data);
            Size++;
            return true;
        }
        else
        {
            cout << "InfoBuffer is full" << endl;
            return false;
        }
    }
    else
    {
        cout << "InfoData so long(>=256)" << endl;
        return false;
    }
}

bool InfoBuffer::pop(Info &top)
{
    if(!Q.empty())
    {
        top = Q.front();
        Q.pop();
        Size--;
        return true;
    }
    else
    {
       cout << "BuffInfo is empty" << endl;
       return false;
    }
}
